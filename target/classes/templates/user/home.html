<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head th:replace="~{/user/fragments::head}">
</head>

<body>
<div th:replace="~{/user/fragments::header}"></div>

<div th:if="${mess}">
    <button hidden id="btnSuccess" th:onclick="alertSuccess([[${mess}]])">Click Me</button>
    <script th:inline="javascript">
        window.onload = function () {
            var btnSuccess = document.getElementById("btnSuccess");
            btnSuccess.click();
        }
        alertSuccess = (content) => {
            Swal.fire({
                title: content,
                icon: "success",
                confirmButtonColor: "#0DC149"
            });
        }
    </script>
</div>
<div class="d-flex mt-3">
    <div class="w-5"></div>
    <div class="w-100 mt-3">
        <div class="row">
            <div class="col-lg-8 mb-5">
                <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img class="d-block w-100" th:src="@{/user/img/slide1.png}" alt="First slide">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" th:src="@{/user/img/slide2.png}" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" th:src="@{/user/img/slide3.png}" alt="Third slide">
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleControls" role="button"
                       data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleControls" role="button"
                       data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>

            <div class="col-lg-4 mb-5 ">
                <div class="mb-4">
                    <div class="product-offer mb-30" style="height: 227px;">
                        <img class="img-fluid" th:src="@{/user/img/sale1.png}" alt="">
                        <div class="offer-text">
                            <h6 class="text-white text-uppercase">Giảm 20%</h6>
                            <h3 class="text-white mb-3">Khuyến mãi đặc biệt</h3>
                            <a href="/home" class="btn btn-shopnow">Mua ngay</a>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="product-offer mb-30" style="height: 227px;">
                        <img class="img-fluid" th:src="@{/user/img/sale2.png}" alt="">
                        <div class="offer-text">
                            <h6 class="text-white text-uppercase">Giảm 20%</h6>
                            <h3 class="text-white mb-3">Khuyến mãi đặc biệt</h3>
                            <a href="/home" class="btn btn-shopnow">Mua ngay</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="w-5"></div>
</div>

<hr class="w-90">
<h1 align="center">
    <strong>Danh sách sản phẩm</strong>
</h1>
<div class="container-fluid pt-5">
    <div class="row px-xl-5 pb-3">

        <div class="col-lg-3 col-md-4 col-sm-6 pb-1" th:each="product : ${listProducAndDiscountHomeResponse}">
            <div class="card product-item">
                <img class="card-img-top" th:src="@{'/image/product/' + ${product.id}}" alt="Product Image">
                <div class="card-img-overlay d-flex justify-content-end" th:if="${product.value != null}">
                    <div class="text-discount card-link text-danger like" th:text="'Giảm ' + ${#strings.substringBefore(product.value, '.')} + '%'"></div>
                </div>
                <div class="card-body">
                    <h5 class="card-title text-truncate" th:text="${product.name}"></h5>
                    <div class="buy d-flex justify-content-between align-items-center">
                        <div class="price text-success" th:if="${product.value == null}">
                            <h5 class="mt-4" th:text="'₫' + ${#numbers.formatDecimal(product.priceMin.stripTrailingZeros().toPlainString(), 0, 'COMMA', 0, 'POINT')}"></h5>
                        </div>
                        <div class="price text-success" th:if="${product.value != null}">
                            <h5 class="mt-4 text-decoration-line-through" th:text="'₫' + ${#numbers.formatDecimal(product.priceMin.stripTrailingZeros().toPlainString(), 0, 'COMMA', 0, 'POINT')}"></h5>
                            <h5 class="mt-4" th:text="'₫' + ${#numbers.formatDecimal(product.priceDiscountMin.stripTrailingZeros().toPlainString(), 0, 'COMMA', 0, 'POINT')}"></h5>
                        </div>
                        <a th:href="@{'/product-detail/' + ${product.id}}" class="btn btn-danger mt-3"><i class="fas fa-shopping-cart"></i> Chi tiết</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<hr class="w-90">

<!-- Product Start -->
<div class="container-fluid pt-5">
    <div class="row px-xl-5 pb-3">
        <div class="col-lg-3 col-md-4 col-sm-6 pb-1" th:each="product : ${listProductDiscountHomeResponse}">
            <div class="product-item mb-4 border-product-home">
                <div class="product-img position-relative overflow-hidden">
                    <div class="text-discount" th:text="'Giảm ' + ${#strings.substringBefore(product.value, '.')} + '%'"></div>
                    <img class="img-fluid w-100" th:src="@{'/image/product/' + ${product.id}}">
                    <div class="product-action">
                        <a class="btn btn-detail-home" th:href="@{'/product-detail/' + ${product.id}}">
                            <i class="fa-solid fa-eye" style="color: #D19C97;"></i>
                        </a>
                    </div>
                </div>
                <div class="text-center py-4 border-info-product-home">
                    <div class="h5 text-decoration-none text-truncate" th:href="@{'/product-detail/' + ${product.id}}"
                       th:text="${product.name}"></div>
                    <div class="d-flex align-items-center justify-content-center mt-2">
<!--                        Chi tiết sản phẩm có 2 giá-->
                        <div class="d-flex justify-content-center price-discout" th:if="${product.priceMax != product.priceMin}">
                            <span th:text="'₫' + ${#numbers.formatDecimal(product.priceMin.stripTrailingZeros().toPlainString(), 0, 'COMMA', 0, 'POINT')}"></span>
                            <span class="ml-1 mr-1"> ~ </span>
                            <span th:text="'₫' + ${#numbers.formatDecimal(product.priceMax.stripTrailingZeros().toPlainString(), 0, 'COMMA', 0, 'POINT')}"></span>
                        </div>
                        <div class="d-flex justify-content-center price" th:if="${product.priceMax != product.priceMin}">
                            <span th:text="'₫' + ${#numbers.formatDecimal(product.priceDiscountMin.stripTrailingZeros().toPlainString(), 0, 'COMMA', 0, 'POINT')}"></span>
                            <span class="ml-1 mr-1"> ~ </span>
                            <span th:text="'₫' + ${#numbers.formatDecimal(product.priceDiscountMax.stripTrailingZeros().toPlainString(), 0, 'COMMA', 0, 'POINT')}"></span>
                        </div>

<!--                        Chi tiết sản phẩm có 1 giá-->
                        <div class="d-flex justify-content-center price-discout" th:if="${product.priceMax == product.priceMin}">
                            <span th:text="'₫' + ${#numbers.formatDecimal(product.priceMin.stripTrailingZeros().toPlainString(), 0, 'COMMA', 0, 'POINT')}"></span>
                        </div>
                        <div class="d-flex justify-content-center price" th:if="${product.priceMax == product.priceMin}">
                            <span th:text="'₫' + ${#numbers.formatDecimal(product.priceDiscountMin.stripTrailingZeros().toPlainString(), 0, 'COMMA', 0, 'POINT')}"></span>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
</div>
<!-- Product End -->

<div th:replace="~{/user/fragments::footer}"></div>

<div th:replace="~{/user/fragments::script}"></div>

</body>

</html>